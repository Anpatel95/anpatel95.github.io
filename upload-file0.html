<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quoting Page</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>

<div class="text-center">
  <img src="https://static.wixstatic.com/media/b022ff_22f5c53ac9664c469d27596ae1809d10~mv2.gif" style="width:40%; height: 150px;" class="rounded mx-auto d-block" alt="...">
</div>

</div>
<div class="container-fluid">
  <div class="container py-3">
      <div class="input-group">
          <form enctype="multipart/form-data" method="post">
            <input type="file" name="fileUploader" id="files" type="file" multiple /><br/>
            <div id="selectedFiles"></div>
            <button type="submit" name="submit" class="btn btn-primary" value="Confirm">Submit</button>
          </form>
      </div>
  </div>
</div>


<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAzsFnKfcbs86BNxlADdauYD4JN2ll93fI",
    authDomain: "arcane-rune-270.firebaseapp.com",
    projectId: "arcane-rune-270",
    storageBucket: "arcane-rune-270.appspot.com",
    messagingSenderId: "122978082703",
    appId: "1:122978082703:web:b6fa12baebc23ff7de75fa",
    measurementId: "G-4QXDZME940"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();


  var selDiv = "";

  document.addEventListener("DOMContentLoaded", init, false);

  function init() {
    document.querySelector('#files').addEventListener('change', handleFileSelect, false);
    selDiv = document.querySelector("#selectedFiles");
  }

  function handleFileSelect(e) {

    if(!e.target.files) return;

    selDiv.innerHTML = "";

    var files = e.target.files;
    for(var i=0; i<files.length; i++) {
      var f = files[i];

      selDiv.innerHTML += f.name + "<br/>";

    }

const form = document.querySelector('form')
form.addEventListener('submit', (e) => {
  e.preventDefault()

  const files = document.querySelector('[type=file]').files
  const formData = new FormData()

  alert(files.length);
  for (let i = 0; i < files.length; i++) {
    var file = files[i]

    var storage = require('@google-cloud/storage')
    var storageRef = firebase.storage().ref('CAD_folder/' + file.name);

    //upload files
    var task = storageRef.put(file);

    alert("firebase storage hit");

    formData.append('fileUploader', file);
  }

})
}
</script>



</body>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</html>
